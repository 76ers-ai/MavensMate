#!/usr/bin/env node
'use strict';

/**
 * @file Starts the MavensMate express server
 * @author Joseph Ferraro <@joeferraro>
 */

var parseArgs   = require('minimist');
var server      = require('../app');
var Client      = require('../app/lib/client').Client;

var args = parseArgs(process.argv);
var projectPath = args.project || process.cwd();
var verbose = args.verbose || false;
var port = args.port || process.env.MAVENSMATE_SERVER_PORT;

process.title = 'mavensmate server';

var client = new Client({
  verbose: verbose,
  serverPort: port,
  isServer: true
});

server.start(client);
process.env.MAVENSMATE_SERVER_PORT = port;
console.log('MavensMate server running on port: '+port);